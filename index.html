<!DOCTYPE html>
<html>
	<head>
		<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
		<meta content="utf-8" http-equiv="encoding">
		<title>Scatterplot Graph</title>
		<script src="../d3.min.js"></script>
		<style>
		</style>
	</head>
	<body>
		<div id="root"></div>
		<script>
			d3.json("cyclist-data.json").then(function(dataset){
				//console.dir(dataset);
				//dimensions of svg canvas
				const width = 1000;
				const height = 500;

				console.log("string=");
				var a = "a";
				console.dir(a);
				console.log("int=");
				var i = 1;
				console.log(i);

				//create svg canvas
				const svg = d3.select("#root")
				.append("svg")
				.attr("width", width)
				.attr("height", height)
				.attr("style", "background-color: lightgrey;");

				//data boundaries X Axis
				//-1 to have 1 tick mark to left of 1994
				var minYear = d3.min(dataset, (d) => d['Year']) - 1;
				console.dir(minYear);
				//+1 to have rightmost tick mark be 2016
				var maxYear = d3.max(dataset, (d) => d['Year']) + 1;
				console.dir(maxYear);

				//data boundaries Y Axis
				var minTime = d3.min(dataset, (d) => d['Time']);
				console.dir(minTime);
				var maxTime = d3.max(dataset, (d) => d['Time']);
				console.dir(maxTime);

				//SO answer
				var specifier = "%M:%S";
				var parsedData = dataset.map(function(d){
					return d3.timeParse(specifier)(d['Time']);
				});
				console.dir(parsedData);

				//scale x data to fit on chart
				const xScale = d3.scaleTime()
				.domain([minYear, maxYear])
				.range([50, width - 50]);

				/*
				//scale y data to fit on chart
				const yScale = d3.scaleTime()
				.domain([minTime, maxTime])
				.range([50, height - 50]);
				*/
				const yScale = d3.scaleTime()
				.domain(d3.extent(parsedData))
				.range([50, height - 50]);


				//position X Axis
				var xAxis = d3.axisBottom(xScale).tickFormat(d3.format("d"));
				svg.append("g")
				.attr("transform", "translate(30,"+(height - 60) +")")
				.call(xAxis);
				//.attr("fill", "green");

				//position Y Axis
				/*
				var axis = d3.axisLeft(yScale)
				.tickValues(parsedData)
				.tickFormat(function(d){
					return d3.timeFormat(specifier)(d)
				});
				*/

				var yAxis = d3.axisLeft(yScale).tickFormat(d3.timeFormat("%M:%S"));
				svg.append("g")
				.attr("transform", "translate(80, -10)")
				.call(yAxis);
				
				//X Axis Label
				svg.append("text")
				.attr("x", width / 2)
				.attr("y", height - 20)
				.text("Year");

				svg.append("text")
				.attr("x", 0)
				.attr("y", 0)
				.attr("transform", "translate(30, 300) rotate(-90)")
				.text("Time in Minutes");





			});
		</script>
	</body>
</html>
